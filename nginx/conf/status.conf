# Nginx Status Monitoring Configuration
# Provides monitoring endpoints for nginx health and performance

# Status server for monitoring (localhost only)
server {
    listen 127.0.0.1:8080;
    server_name localhost;
    
    # Nginx status page with connection statistics
    location /nginx_status {
        stub_status on;
        access_log off;
        allow 127.0.0.1;
        deny all;
    }
    
    # Connection limiting status endpoint
    location /limit_status {
        access_log off;
        allow 127.0.0.1;
        deny all;
        return 200 "Connection limits active\n";
    }
}

# Example rate limiting usage for server blocks:
#
# location /api/ {
#     limit_req zone=api burst=20 nodelay;
#     limit_conn conn_limit_per_ip 10;
# }
#
# location /login/ {
#     limit_req zone=login burst=5 nodelay;
# }
