# Image Filter Module Configuration
# Provides dynamic image processing capabilities

# Example image processing configurations
# Add these to your server blocks as needed

# Basic image resizing
location ~* \.(jpg|jpeg|png|gif)$ {
    # Resize images to max width 800px, height 600px
    image_filter resize 800 600;
    image_filter_jpeg_quality 75;
    
    # Cache processed images
    expires 1d;
    add_header Cache-Control "public, immutable";
}

# Thumbnail generation
location ~* /thumb/(.*)\.(jpg|jpeg|png|gif)$ {
    # Generate thumbnails 150x150
    image_filter resize 150 150;
    image_filter_jpeg_quality 85;
    
    expires 30d;
    add_header Cache-Control "public";
}

# Image rotation based on EXIF
location ~* \.(jpg|jpeg)$ {
    image_filter rotate $arg_angle;
    image_filter_jpeg_quality 90;
}

# Image watermarking (advanced)
location ~* \.(jpg|jpeg|png)$ {
    image_filter watermark /path/to/watermark.png;
}

# Performance settings for image processing
image_filter_buffer 10M;
image_filter_jpeg_quality 85;
image_filter_transparency on;
image_filter_sharpen 80;

# Note: Image processing is CPU intensive
# Consider using caching or pre-processing for high-traffic sites
